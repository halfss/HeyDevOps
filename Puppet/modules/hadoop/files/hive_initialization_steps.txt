"File Managed by Puppet"

"--------------------------------------------"
"The initialization steps for Hive Server"
"--------------------------------------------"

"Step1. Create the directories on HDFS"
sudo -u hdfs hadoop fs -mkdir /user/hive
sudo -u hdfs hadoop fs -chown hive /user/hive
sudo -u hdfs hadoop fs -mkdir /tmp
sudo -u hdfs hadoop fs -chmod 777 /tmp
sudo -u hdfs hadoop fs -chmod o+t /tmp
sudo -u hdfs hadoop fs -mkdir /data
sudo -u hdfs hadoop fs -chown hdfs /data
sudo -u hdfs hadoop fs -chmod 777 /data
sudo -u hdfs hadoop fs -chmod o+t /data

"Step2. Start MySQL"
sudo /etc/init.d/mysqld start

"Step3. Reset the password for MySQL"
mysqladmin -u root password 'hadoophive'

"Step4. Create the database for metasotre"
mysql -uroot -phadoophive < /opt/puppet-workdir/hadoop/hive_mysqlserver_initialization.sql

"Step5. Start Hive"
sudo /etc/init.d/hadoop-hive-metastore start
sudo /etc/init.d/hadoop-hive-server start
